{"version":3,"names":[],"mappings":"","sources":["checkout.min.js"],"sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t// Section validation status\n\tvar sectionStatus = {\n\t  1: false,\n\t  2: false,\n\t  3: false,\n\t  4: false\n\t};\n\t\n\t// Doc ready\n\t$(document).ready(function() {\n\t\n\t  // Initialise modules\n\t  Ellipsis.watch('[am-summary~=description]');\n\t\n\t  // Initialise validation\n\t  Validation.init();\n\t\n\t  // Specific field validation\n\t  $('[name=payment-card-number]').change(function(event) {\n\t    Validation.cardNumber(this);\n\t  });\n\t\n\t  $('[name=payment-security-number]').change(function() {\n\t    Validation.cvv(this);\n\t  });\n\t\n\t  $('[name=payment-tc]').change(function() {\n\t    Validation.checkbox(this);\n\t  });\n\t\n\t\n\t  $('[am-checkout-tabs~=list]').first().addClass('active');\n\t\n\t  // Initialise billing copy\n\t  sameBilling();\n\t\n\t  // Continue button click\n\t  $('[am-checkout~=continue]').click(function(e) {\n\t\n\t    // Validate current section\n\t    var section = $(this).parents('[data-section]')[0],\n\t        sectionNumber = $(section).attr('data-section'),\n\t        valid = Validation.section(section);\n\t\n\t    // Validate accept checkbox\n\t    if (sectionNumber == 3) {\n\t      var acceptCheckbox = Validation.checkbox('[name=payment-tc]'),\n\t          cardNumber = Validation.cardNumber('[name=payment-card-number]'),\n\t          cvv = Validation.cvv('[name=payment-security-number]');\n\t\n\t      if (!acceptCheckbox || !cardNumber || !cvv) {\n\t        valid = false;\n\t      }\n\t    }\n\t\n\t    // Update section status & tab labels\n\t    var sectionNumber = $(section).attr('data-section');\n\t        sectionStatus[sectionNumber] = valid;\n\t        labelTabs();\n\t\n\t    // Open next section\n\t    if (valid) {\n\t      var nextSection = parseInt(sectionNumber) + 1,\n\t          nextTab = $('[am-checkout-tabs~=list]').find('[data-tab=' + nextSection + ']');\n\t\n\t      openSection(nextSection);\n\t\n\t      // Scroll to top of form\n\t      $('html, body').animate({\n\t        scrollTop: $(nextTab).offset().top\n\t      }, 300);\n\t    }\n\t\n\t    // Prevent default action\n\t    e.preventDefault();\n\t  });\n\t\n\t  // Toggle CVV explanation\n\t  $('[am-checkout~=explain-cvv]').click(function(e) {\n\t    $('[am-checkout~=cvv-explanation]').slideToggle(200);\n\t    e.preventDefault();\n\t  });\n\t\n\t  // Review edit link click\n\t  $('[am-checkout~=edit]').click(function(e) {\n\t\n\t    // Get tab number\n\t    var tabNumber = $(this).attr('data-tab');\n\t\n\t    // Activate section\n\t    openSection(tabNumber);\n\t\n\t    // Check first tab active\n\t    if(tabNumber == 1) {\n\t\n\t      // Detect input content change\n\t      $('[data-section~=1]').bind('input', function() {\n\t        // Unckeck same as delivery checkbox\n\t        $('input[name=billing-copy]').prop('checked', false);\n\t\n\t        // Remove all edit tags \n\t        $('[data-tab]').addClass('incomplete').removeClass('complete');\n\t\n\t      });\n\t    }\n\t\n\t    // Prevent default action\n\t    e.preventDefault();\n\t  });\n\t\n\t  // Detect input content change for step 2\n\t  $('[data-section~=2]').bind('input', function() {\n\t    // Unckeck same as delivery checkbox\n\t    $('input[name=billing-copy]').prop('checked', false);\n\t  });\n\t\n\t});\n\t\n\t\n\t// Open form section\n\t// --------------------------------\n\t\n\tfunction openSection(sectionNumber) {\n\t\n\t  // Activate section\n\t  $('[data-section]').removeClass('active');\n\t  $('[data-section=' + sectionNumber + ']').addClass('active');\n\t\n\t  // Activate tab\n\t  $('[data-tab]').removeClass('active');\n\t  $('[data-tab=' + sectionNumber + ']').addClass('active');\n\t\n\t  if ($('[data-tab=' + sectionNumber + ']').hasClass('active')) {\n\t    $('[data-tab=' + sectionNumber + ']').parent().addClass('active');\n\t  }\n\t\n\t  // Check if last section is active\n\t  if (sectionNumber == 4) {\n\t    reviewData();\n\t  }\n\t}\n\t\n\t\n\t// Label tabs complete/incomplete\n\t// --------------------------------\n\t\n\tfunction labelTabs() {\n\t\n\t  // Loop section status & mark tabs as complete or incomplete\n\t  for (var key in sectionStatus) {\n\t    if (sectionStatus[key]) {\n\t\n\t      // Tab complete\n\t      $('[data-tab~=' + key + ']').removeClass('incomplete').addClass('complete');\n\t    } else {\n\t\n\t      // Tab incomplete\n\t      $('[data-tab~=' + key + ']').addClass('incomplete').removeClass('complete');\n\t    }\n\t  }\n\t}\n\t\n\t\n\t// Review data\n\t// --------------------------------\n\t\n\tfunction reviewData() {\n\t\n\t  // Store all values in object\n\t  var data = {};\n\t\n\t  $('[name]').each(function() {\n\t    data[$(this).attr('name')] = $(this).val().trim();\n\t  });\n\t\n\t  // Build review strings\n\t  var delivery = data['delivery-first-name'] + ' ' + data['delivery-last-name'] + '<br>' +\n\t                 data['delivery-line-1'] + (data['delivery-line-2'] ? ', ' + data['delivery-line-2'] : '') + '<br>' +\n\t                 data['delivery-city'] + ', ' + data['delivery-state'] + '<br>' +\n\t                 data['delivery-zip'];\n\t\n\t  var billing = data['billing-first-name'] + ' ' + data['billing-last-name'] + '<br>' +\n\t                data['billing-line-1'] + (data['billing-line-2'] ? ', ' + data['billing-line-2'] : '') + '<br>' +\n\t                data['billing-city'] + ', ' + data['billing-state'] + '<br>' +\n\t                data['billing-zip'];\n\t\n\t  var payment = data['payment-card-type'] + ' XXXX XXXX XXXX ' + data['payment-card-number'].substr(data['payment-card-number'].length - 4);\n\t\n\t  // Apply review data\n\t  $('[am-checkout=review-delivery]').html(delivery);\n\t  $('[am-checkout=review-billing]').html(billing);\n\t  $('[am-checkout=review-payment]').html(payment);\n\t}\n\t\n\t\n\t// Copy delivery info\n\t// --------------------------------\n\t\n\tfunction sameBilling() {\n\t  var billingCheck = $('input[name=billing-copy]'),\n\t      billingFirst = $('input[name=billing-first-name]'),\n\t      billingLast = $('input[name=billing-last-name]'),\n\t      billingLine1 = $('input[name=billing-line-1]'),\n\t      billingLine2 = $('input[name=billing-line-2]'),\n\t      billingCity = $('input[name=billing-city]'),\n\t      billingState = $('input[name=billing-state]'),\n\t      billingZip = $('input[name=billing-zip]');\n\t\n\t  billingCheck.click(function() {\n\t    if ($(this).is(':checked')) {\n\t      billingFirst.val($('input[name=delivery-first-name]').val());\n\t      billingLast.val($('input[name=delivery-last-name]').val());\n\t      billingLine1.val($('input[name=delivery-line-1]').val());\n\t      billingLine2.val($('input[name=delivery-line-2]').val());\n\t      billingCity.val($('input[name=delivery-city]').val());\n\t      billingState.val($('input[name=delivery-state]').val());\n\t      billingZip.val($('input[name=delivery-zip]').val());\n\t\n\t      //Remove all invalid classes\n\t      $('[data-section=\"2\"] :input').removeClass('invalid');\n\t\n\t      // Initialise dynamic validation\n\t      Validation.init();\n\t\n\t    } else {\n\t      billingFirst.val('');\n\t      billingLast.val('');\n\t      billingLine1.val('');\n\t      billingLine2.val('');\n\t      billingCity.val('');\n\t      billingState.val('');\n\t      billingZip.val('');\n\t\n\t      // Initialise dynamic validation\n\t      Validation.init();\n\t    }\n\t  });\n\t}\n\n/***/ })\n/******/ ]);\n"],"file":"checkout.min.js","sourceRoot":"/source/"}