{"version":3,"names":[],"mappings":"","sources":["community-hub.min.js"],"sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t// Page components\n\tvar Height = __webpack_require__(1),\n\t    Center = __webpack_require__(2),\n\t    Charcount = __webpack_require__(3),\n\t    DefaultOrder = 'leaderboard, event, shout-out, my-squad, buddy-up, hero, connection, rep',\n\t    ListArray = localStorage['listArray'] || DefaultOrder,\n\t    ListOrder = ListArray.split(',');\n\t\n\t// Doc ready\n\t$(document).ready(function() {\n\t  UserMessage.init();\n\t\n\t  // Specify pod order\n\t  orderUpdate(ListOrder, '[am-community~=tiles] [am-row]', true);\n\t\n\t  // Specify settings list order\n\t  orderUpdate(ListOrder, '[am-community~=settings-list]');\n\t\n\t  // Open settings\n\t  $('[am-community~=cog]').on('click', function() {\n\t    Modal.show('communitySettings');\n\t  });\n\t\n\t\n\t  $('[am-community~=close]').on('click', function() {\n\t    Modal.hide('communitySettings');\n\t    location.reload();\n\t  });\n\t\n\t  // Flip tiles\n\t  function carouseFlip(front, back, pod) {\n\t    $('[am-community~=tile-front] ' + front).on('click', function() {\n\t      $(this).parents('[am-community~=tile-wrapper]').addClass('flipped');\n\t      $(pod).owlCarousel('destroy');\n\t    });\n\t\n\t    $('[am-community~=tile-back] ' + back).on('click', function() {\n\t      $(this).parents('[am-community~=tile-wrapper]').removeClass('flipped');\n\t      setTimeout(function () {\n\t        $(pod).owlCarousel(options);\n\t      }, 100);\n\t    });\n\t  }\n\t\n\t  carouseFlip('[am-community~=reps]', '[am-community~=reps-back]', '[am-carousel~=pod-reps]');\n\t\n\t  carouseFlip('[am-community~=heroes]', '[am-community~=heroes-back]', '[am-carousel~=pod-hero]');\n\t\n\t  $('[am-community~=tile-front] [am-community~=ellipsis]').on('click', function() {\n\t    $(this).parents('[am-community~=tile-wrapper]').addClass('flipped');\n\t  });\n\t\n\t  $('[am-community~=tile-back] [am-community~=ellipsis]').on('click', function() {\n\t    $(this).parents('[am-community~=tile-wrapper]').removeClass('flipped');\n\t  });\n\t\n\t  // Toggle follow\n\t  $('[am-btn~=follow]').on('click', function() {\n\t    $(this).html() == 'Unfollow' ? $(this).html('Follow') : $(this).html('Unfollow');\n\t\n\t    $(this).attr('am-btn', function(index, attr){\n\t      return attr == 'cross fill follow' ? 'tick fill follow' : 'cross fill follow';\n\t    });\n\t  });\n\t\n\t  // Make all pods the same height\n\t  Height.itemHeight('[am-community~=tile-inner]', '[am-community~=tile-wrapper]', 768);\n\t  Height.itemHeight('[am-community~=tile-top]', '[am-community~=tile-bottom]', 768);\n\t\n\t  $(window).on('resize', function() {\n\t    Throttle.afterEvent('itemHeight', function() {\n\t      Height.itemHeight('[am-community~=tile-inner]', '[am-community~=tile-wrapper]', 768);\n\t      Height.itemHeight('[am-community~=tile-top]', '[am-community~=tile-bottom]', 768);\n\t    });\n\t  });\n\t\n\t  // Center nav on active item\n\t  Center.init('[am-sub-nav~=item].active', '[am-sub-nav~=inner]');\n\t\n\t  // Carousel options\n\t  var options = {\n\t    dots: false,\n\t    margin: 0,\n\t    nav: true,\n\t    rtl: true,\n\t    rewind: false,\n\t    items: 1,\n\t    navText: ['<div am-carousel=\"next\"><i data-icon=\"arrow-left\"></i></div>', '<div am-carousel=\"prev\"><i data-icon=\"arrow-right\"></i></div>']\n\t  }\n\t\n\t  // Carousel Initialization\n\t  $('[am-carousel~=pod-loop]').owlCarousel(options);\n\t\n\t  // Initialise jQuery UI sortable\n\t  $('[am-community~=settings-list]').sortable({\n\t    start: animateCrane,\n\t    stop: orderList,\n\t    placeholder: 'drop-zone',\n\t    tolerance: 'pointer'\n\t  });\n\t\n\t  // Animate crane\n\t  function animateCrane(e, ui) {\n\t    $('[am-community~=crane-block]').addClass('hover');\n\t    $('[am-community~=crane-block]').addClass($(ui.item).data('pod'));\n\t  }\n\t\n\t  // Update pod heights\n\t  function updateHeight(e) {\n\t    Height.itemHeight('[am-profile~=tile-badge]', '[am-hero~=tile]', '992');\n\t  }\n\t\n\t  // Re-sort pod order\n\t  function showLoader() {\n\t    $('[am-loader~=container]').addClass('show');\n\t  }\n\t\n\t  // List order\n\t  function orderList() {\n\t    $('[am-loader~=container]').removeClass('show');\n\t    $('[am-community~=crane-block]').removeClass();\n\t\n\t    ListOrder = $(this).sortable('toArray', {\n\t      attribute: 'data-pod'\n\t    });\n\t\n\t    // Store order array\n\t    localStorage['listArray'] = ListOrder;\n\t  }\n\t\n\t  // Re-sort pod order\n\t  function orderUpdate(order, list, pods) {\n\t    // Create variables\n\t    var list = list,\n\t        parent,\n\t        item,\n\t        pods;\n\t\n\t    // Loop through each item\n\t    ListOrder.forEach(function(element, index) {\n\t\n\t      // Define parent element\n\t      parent = $(list);\n\t\n\t      // Define item\n\t      item = $(list + ' [data-pod=' + element + ']');\n\t\n\t      item.remove().appendTo(parent);\n\t\n\t      // Check to see if pod list\n\t      if (pods) {\n\t\n\t        // Make pod box 8 cols if first\n\t        if (index === 0) {\n\t\n\t          item.attr('am-col', 'lg-8');\n\t          item.find('[am-community~=tile]').addClass('featured');\n\t\n\t        } else {\n\t\n\t          item.attr('am-col', 'lg-4');\n\t          item.find('[am-community~=tile]').removeClass('featured');\n\t        }\n\t      }\n\t\n\t    });\n\t\n\t  }\n\t\n\t  // Enable shout out submit button\n\t  $('[am-form~=shoutout]').on('keyup', function() {\n\t\n\t    // If the input is not empty\n\t    if($(this).val().length > 0) {   \n\t      $('[am-form~=submit]').removeAttr('disabled');\n\t    }\n\t  });\n\t\n\t  // Delete shout out\n\t  $('[am-shout-out~=delete]').click(function(e) {\n\t\n\t    // Confirm action\n\t    var confirm = window.confirm('Are you sure you want to delete this message?');\n\t\n\t    // Unconfirmed - prevent default\n\t    if (!confirm) {\n\t      e.preventDefault();\n\t    }\n\t  });\n\t\n\t  // Flag modal\n\t  $('[am-shout-out~=flag]').on('click', function(e) {\n\t    // Get post ID\n\t    var post = $(this).attr('data-post');\n\t\n\t    // Open modal\n\t    Modal.show('commentflag');\n\t\n\t    $('[am-form~=post]').val(post);\n\t    e.preventDefault();\n\t  });\n\t\n\t  // Form validation\n\t  Validation.init();\n\t\n\t  $('[am-btn~=submit]').on('click', function(e) {\n\t    Validation.validate();\n\t    e.preventDefault();\n\t  })\n\t\n\t\n\t  // Close modal\n\t  $('[am-modal~=close]').on('click', function(e) {\n\t    Modal.hide('commentflag');\n\t\n\t    // Clear textarea\n\t    $('[am-form~=charcount]').val('');\n\t    e.preventDefault();\n\t  });\n\t\n\t  // Feedback char count\n\t  Charcount.init(250, '[am-form~=charcount-feedback]', '[am-form~=charcount]');\n\t\n\t});\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t\n\t  init: function(container, column, breakpoint) {\n\t\n\t    // Store scope\n\t    var scope = this;\n\t\n\t    if (typeof breakpoint !== typeof undefined && breakpoint !== false) {\n\t      var breakpoint = breakpoint;\n\t    } else {\n\t      var breakpoint = '768';\n\t    }\n\t\n\t    // Apply product grid heights\n\t    scope.itemHeight(container, column, breakpoint);\n\t\n\t    $(window).on('resize', function() {\n\t      Throttle.afterEvent('itemHeight', function() {\n\t        scope.itemHeight(container, column, breakpoint);\n\t      });\n\t    });\n\t  },\n\t\n\t  // Apply heights to product grid columns\n\t  // --------------------------------\n\t\n\t  itemHeight: function(container, column, breakpoint) {\n\t\n\t    // Store scope\n\t    var scope = this;\n\t\n\t    // Store product height\n\t    var colHeight = 0;\n\t\n\t    // Target breakpoints above mobile\n\t    if ($(window).width() >= breakpoint) {\n\t\n\t      // Loop products and get height\n\t      $(container).each(function() {\n\t        var itemHeight = $(this).outerHeight();\n\t        if (itemHeight > colHeight) {\n\t          colHeight = itemHeight;\n\t        }\n\t      });\n\t\n\t    } else {\n\t\n\t      // Set height to auto on mobile\n\t      colHeight = 'auto';\n\t    }\n\t\n\t    // Apply height to all columns\n\t    $(column).outerHeight(colHeight);\n\t  }\n\t};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t\n\t  init: function(target, outer) {\n\t    var outer = $(outer),\n\t        target = $(target),\n\t        outerWidth = outer.width(),\n\t        targetWidth = target.outerWidth(true),\n\t        targetPosition = target.index(),\n\t        count = 0,\n\t        listItem = outer.find('li');\n\t\n\t    //Add up the width of all the elements before our target. \n\t    for(var i = 0; i < targetPosition; i++){\n\t      count+= $(listItem[i]).outerWidth(true);\n\t    }\n\t\n\t    outer.scrollLeft(Math.max(0, count - (outerWidth - targetWidth) / 2));\n\t\n\t  }\n\t};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t\n\t  // Initialise module\n\t  // --------------------------------\n\t\n\t  init: function(count, feedback, el) {\n\t\n\t    var text_max = count;\n\t\n\t    // Add max chars text\n\t    $(feedback).html(text_max + ' remaining');\n\t\n\t    // Listen for keyup on element\n\t    $(el).keyup(function() {\n\t      var text = $(el).val(),\n\t          text_length = text.length,\n\t          text_remaining = text_max - text_length,\n\t          newLines = text.match(/(\\r\\n|\\n|\\r)/g),\n\t          addition = 0;\n\t\n\t      // Detect line breaks\n\t      if (newLines != null) {\n\t        addition = newLines.length;\n\t      }\n\t\n\t      // Update max chars text\n\t      $(feedback).html((text_remaining - addition) + ' remaining');\n\t    });\n\t  }\n\t};\n\n\n/***/ })\n/******/ ]);\n"],"file":"community-hub.min.js","sourceRoot":"/source/"}